' Common component definitions for ESP32 Stepper Motor Controller

' System Status Enumeration
!startsub SYSTEM_STATUS_ENUM
enum system_status_t {
    SYSTEM_STATUS_INIT = 0
    SYSTEM_STATUS_READY
    SYSTEM_STATUS_ERROR
    SYSTEM_STATUS_TESTING
}
!endsub

' Motor Command Enumeration
!startsub MOTOR_COMMAND_ENUM
enum motor_command_t {
    MOTOR_CMD_STOP = 0
    MOTOR_CMD_MOVE_ABSOLUTE
    MOTOR_CMD_MOVE_RELATIVE
    MOTOR_CMD_HOME
    MOTOR_CMD_SET_SPEED
    MOTOR_CMD_ENABLE
    MOTOR_CMD_DISABLE
}
!endsub

' Motor Status Enumeration
!startsub MOTOR_STATUS_ENUM
enum motor_status_t {
    MOTOR_STATUS_IDLE = 0
    MOTOR_STATUS_MOVING
    MOTOR_STATUS_ERROR
    MOTOR_STATUS_DISABLED
}
!endsub

' Hardware Configuration
!startsub HARDWARE_CONFIG
class HardwareConfig <<Configuration>> {
    + {static} DEFAULT_MOTOR_AIN1 : GPIO_NUM_26
    + {static} DEFAULT_MOTOR_AIN2 : GPIO_NUM_27
    + {static} DEFAULT_MOTOR_BIN1 : GPIO_NUM_14
    + {static} DEFAULT_MOTOR_BIN2 : GPIO_NUM_12
    + {static} DEFAULT_MOTOR_SLEEP : GPIO_NUM_13
    + {static} DEFAULT_MOTOR_FAULT : GPIO_NUM_25
    + {static} DEFAULT_LED1_GPIO : GPIO_NUM_2
    + {static} DEFAULT_LED2_GPIO : GPIO_NUM_4
    + {static} DEFAULT_LED3_GPIO : GPIO_NUM_5
    + {static} DEFAULT_LED4_GPIO : GPIO_NUM_18
}
!endsub

' System Configuration
!startsub SYSTEM_CONFIG
class SystemConfig <<Configuration>> {
    + {static} DEVICE_NAME : "ESP32_StepperMotor"
    + {static} FIRMWARE_VERSION : "1.0.0"
    + {static} BLE_DEVICE_NAME : DEVICE_NAME
    + {static} BLE_APPEARANCE : 0x0000
    + {static} BLE_ADV_INTERVAL_MIN : 0x20
    + {static} BLE_ADV_INTERVAL_MAX : 0x40
}
!endsub

' Motor Configuration
!startsub MOTOR_CONFIG
class MotorConfig <<Configuration>> {
    + {static} STEPS_PER_REVOLUTION : 200
    + {static} MICROSTEPS : 1
    + {static} THREAD_PITCH_MM : 2.0
    + {static} STEPS_PER_MM : (calculated)
    + {static} STROKE_LENGTH_MM : 50
    + {static} MOTOR_DEFAULT_SPEED : 10
    + {static} MOTOR_MIN_SPEED : 1
    + {static} MOTOR_MAX_SPEED : 1000
}
!endsub

' Common actors
!startsub COMMON_ACTORS
actor "Mobile User" as User
actor "ESP32 Device" as ESP32
actor "Stepper Motor" as Motor
actor "LEDs" as LEDs
!endsub 